{% extends 'base.html' %}

{% block body %}
    <h1 class="text-3xl font-bold mb-8">Your Cart</h1>
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="lg:col-span-2">
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                {% if cart_items %}

                    {% for item in cart_items %}
                        <div class="flex items-center py-6 border-b">
                            <img src="{{ item.product.featured_image.url }}" alt="{{ item.product.name }}" class="w-24 h-24 object-cover rounded-md">
                            <div class="ml-4 flex-1">
                                <h2 class="text-lg font-semibold">{{ item.product.name }}</h2>
                                <p class="text-gray-600">{{ item.description }}</p>
                                <div class="mt-2 flex items-center justify-between">
                                    <div class="flex items-center border rounded-md">
                                        <a href="/cart/decrease/{{ item.id }}/" class="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-l-md">-</a>
                                        <span class="px-3 py-1">{{ item.quantity }}</span>
                                        <a href="/cart/increase/{{ item.id }}/" class="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-r-md">+</a>
                                    </div>
                                    <p class="font-semibold">৳fdgdfg</p>
                                </div>
                            </div>
                            <a href="/cart/remove/{{ item.id }}/" class="ml-4 text-red-500 hover:text-red-700">
                                <i data-lucide="trash-2" class="w-5 h-5"></i>
                            </a>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="text-center py-8">
                        <i data-lucide="shopping-cart" class="w-16 h-16 mx-auto text-gray-400 mb-4"></i>
                        <p class="text-xl text-gray-600">Your cart is empty</p>
                        <a href="#" class="mt-4 inline-block bg-[#FF8C00] text-white px-6 py-2 rounded-md hover:bg-[#FF8C00]/90">Start Shopping</a>
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="lg:col-span-1">
            <div class="bg-white rounded-lg shadow-md p-6 sticky top-6">
                <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
                {% if cart_items %}
                    <div class="space-y-2 text-sm border-b pb-4 mb-4">
                        <div class="flex justify-between">
                            <span>Subtotal</span>
                            <span>৳{{ subtotal }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Shipping</span>
                            <select id="shipping-method" class="border p-1 rounded">
                                <option value="70">Standard - ৳70.00</option>
                                <option value="100">Express - ৳100.00</option>
                                <option value="50">Economy - ৳50.00</option>
                            </select>
                            <span id="shipping-price">৳70.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Tax</span>
                            <span>৳{{ tax }}</span>
                        </div>
                    </div>
                    <div class="flex justify-between font-semibold text-lg">
                        <span>Total</span>
                        <span>৳{{ total }}</span>
                    </div>
                    <a href="/checkout/" class="w-full mt-6 block bg-[#FF8C00] text-white py-3 text-center rounded-md hover:bg-[#FF8C00]/90 transition-colors">
                        Proceed to Checkout
                    </a>
                {% else %}
                    <p class="text-center text-gray-600">No items in cart</p>
                {% endif %}
            </div>
        </div>
    </div>



    <script>
        // Get the select element and shipping price span
        const shippingMethodSelect = document.getElementById('shipping-method');
        const shippingPriceSpan = document.getElementById('shipping-price');
    
        // Update the shipping price when a new shipping method is selected
        shippingMethodSelect.addEventListener('change', function() {
            const selectedPrice = this.value;
            shippingPriceSpan.textContent = `৳${selectedPrice}.00`;
        });
    </script>
    
{% endblock %}
